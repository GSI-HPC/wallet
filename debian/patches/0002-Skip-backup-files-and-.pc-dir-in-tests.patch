From: Christopher Huhn <C.Huhn@gsi.de>
Date: Fri, 26 Jan 2024 18:13:12 +0100
Subject: Skip backup files and .pc dir in tests
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: 8bit

The package build on Bookworm leaves behind a configure~ and the spdx license test
stumbles over it â†’ ignore all files suffixed with a ~.
Also debian patching creates a .pc directory that should be ignored
in the spdx license and Test::Strict perl tests.
---
 tests/docs/spdx-license-t         | 2 ++
 tests/tap/perl/Test/RRA/Config.pm | 2 +-
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/tests/docs/spdx-license-t b/tests/docs/spdx-license-t
index 91072bf..83a1984 100755
--- a/tests/docs/spdx-license-t
+++ b/tests/docs/spdx-license-t
@@ -51,9 +51,11 @@ my @IGNORE = (
     qr{ \A README ( [.] .* )? \z }xms,  # Package license should be fine
     qr{ \A (Makefile|libtool) \z }xms,  # Generated file
     qr{ [.] output \z }xms,             # Test data
+    qr{ \A .*~ \z }xms,                 # Backup files
 );
 my @IGNORE_PATHS = (
     qr{ \A debian/ }xms,                       # Found in debian/* branches
+    qr{ \A [.] pc/ }xms,                       # quilt working directories for debian patches
     qr{ \A docs/metadata/ }xms,                # Package license should be fine
     qr{ \A docs/protocol[.](html|txt) \z }xms, # Generated by xml2rfc
     qr{ \A m4/ (libtool|lt.*) [.] m4 \z }xms,  # Files from Libtool
diff --git a/tests/tap/perl/Test/RRA/Config.pm b/tests/tap/perl/Test/RRA/Config.pm
index 40641f1..65d07c2 100644
--- a/tests/tap/perl/Test/RRA/Config.pm
+++ b/tests/tap/perl/Test/RRA/Config.pm
@@ -66,7 +66,7 @@ our $MINIMUM_VERSION = '5.008';
 our %MINIMUM_VERSION;
 our @MODULE_VERSION_IGNORE;
 our @POD_COVERAGE_EXCLUDE;
-our @STRICT_IGNORE;
+our @STRICT_IGNORE = qw(.pc);
 our @STRICT_PREREQ;
 
 # Load the configuration.
